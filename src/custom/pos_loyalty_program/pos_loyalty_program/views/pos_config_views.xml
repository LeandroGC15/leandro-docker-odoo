<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Extensión de la vista formulario de pos.config -->
    <record id="view_pos_config_form_loyalty" model="ir.ui.view">
        <field name="name">pos.config.form.loyalty</field>
        <field name="model">pos.config</field>
        <field name="inherit_id" ref="point_of_sale.pos_config_view_form"/>
        <field name="arch" type="xml">
            <!-- Añadir configuración de fidelización después del contenedor de settings -->
            <xpath expr="//div[hasclass('o_settings_container')][last()]" position="after">
                <div class="row mt16 o_settings_container" invisible="context.get('pos_config_create_mode', False)">
                    <setting string="Programa de Fidelización" help="Habilitar sistema de puntos de fidelización para clientes">
                        <field name="loyalty_program_enabled"/>
                        <div class="content-group mt16" invisible="not loyalty_program_enabled">
                            <div class="row">
                                <label string="Puntos por monto" for="loyalty_points_per_amount" class="col-lg-4 o_light_label"/>
                                <field name="loyalty_points_per_amount" class="oe_inline"/>
                                <span class="ms-1">puntos por cada</span>
                                <field name="loyalty_amount_per_points" class="oe_inline ms-1"/>
                                <span class="ms-1">de compra</span>
                            </div>
                            <div class="row mt8">
                                <label string="Redondeo de puntos" for="loyalty_points_rounding" class="col-lg-4 o_light_label"/>
                                <field name="loyalty_points_rounding"/>
                            </div>
                        </div>
                    </setting>
                </div>
            </xpath>
        </field>
    </record>
</odoo>

